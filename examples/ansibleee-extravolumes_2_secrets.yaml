apiVersion: redhat.com/v1alpha1
kind: AnsibleEE
metadata:
  name: ansibleee-extravolumes
  namespace: openstack
spec:
  # We can specify either playbook, which will run with default ansible-runner options,
  # or args, which allows specify the whole command that we want to execute
  playbook: "test.yaml"
  # args: ["ansible-runner", "run", "/runner", "-vvv", "-p", "test.yaml"]
  image: "quay.io/jlarriba/openstack-tripleo-ansible-ee:stable"
  inventory: |
          all:
            hosts:
              localhost
  extraMounts:
    - extraVolType: Ceph
      volumes:
      - name: ceph
        projected:
          sources:
          - secret:
              name: ceph-client-conf
          - secret:
              name: ceph-client-conf2
      mounts:
      - name: ceph
        mountPath: "/etc/ceph"
        readOnly: true
    - extraVolType: Ceph
      volumes:
      - name: ceph2
        projected:
          sources:
          - secret:
              name: ceph-client-conf
      mounts:
      - name: ceph2
        mountPath: "/etc/ceph2"
        readOnly: true
  configs:
    - name: swift-configmap
      mountpath: /runner/configs/swift-configmap
    - name: test-configmap-1
      mountpath: /runner/configs/test-configmap-1
    - name: test-configmap-2
      mountpath: /runner/configs/test-configmap-2
